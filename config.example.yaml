infrastructure:
  provider: hetzner
  defaults:
    server_type: cx23   # 2 vCPU (shared), 4 GB RAM - €2.99/mo
    image: ubuntu-24.04  # Default image for all roles
    prefer_ipv6: false   # Use IPv6 for SSH checks and connections (default: false for IPv4)
    ipv6_only: false     # Strict IPv6-only mode - fail if no IPv6 (default: false)
    # Note: CX series has shared vCPU. For production, consider CPX21 (dedicated vCPU)
    # Note: ipv6_only requires your local network to have IPv6 connectivity
    ssh_key: main  # Name of SSH key in Hetzner Cloud (will be auto-uploaded if not found)
    ssh_key_path: ""  # Optional: Path to local SSH public key (e.g., "~/.ssh/id_ed25519.pub")
                       # If not specified, Morpheus will search common SSH key locations
  
  # Per-role overrides (optional)
  roles:
    edge:
      # Forest nodes: NATS only, pure CPU/RAM
      # CX23 for budget, CPX21 for production consistency
      image: ubuntu-24.04
      server_type: cx23    # 2 vCPU (shared), 4 GB RAM (~€2.99/mo)
      # Upgrade to cpx21 for production (dedicated vCPU, €9/mo)
    
    compute:
      # Nims nodes: GPU-dependent applications
      # Ubuntu required for NVIDIA drivers and CUDA support
      # Shared vCPU may hurt GPU performance - consider CPX for consistency
      image: ubuntu-24.04  # Must be Ubuntu for GPU support
      server_type: cx23    # Budget option (~€2.99/mo)
      # Upgrade to cpx21/cpx31 for GPU workloads
    
    storage:
      # Storage nodes: NFS/persistent data
      image: ubuntu-24.04
      server_type: cx23    # Sufficient for NFS storage server
  locations:
    # Morpheus will try each location in order and automatically fall back
    # to the next one if a location is unavailable or at capacity
    - fsn1  # Falkenstein, Germany (Europe)
    - nbg1  # Nuremberg, Germany (Europe)
    - hel1  # Helsinki, Finland (Europe)
    # Other available locations:
    # - ash   # Ashburn, VA, USA (US East)
    # - hil   # Hillsboro, OR, USA (US West)
    # - sin   # Singapore (Asia)

integration:
  # NimsForest callback URL for bootstrap notifications
  # Morpheus will call this when infrastructure is ready
  nimsforest_url: ""  # e.g., "https://nimsforest.example.com"
  
  # Optional: Morpheus registry URL for infrastructure state tracking
  registry_url: ""  # e.g., "https://registry.example.com"

provisioning:
  # How long to wait for infrastructure to be ready after server starts
  # Morpheus verifies SSH connectivity before marking nodes as ready
  readiness_timeout: "5m"
  
  # How often to check infrastructure readiness
  readiness_interval: "10s"
  
  # SSH port to check for connectivity (default: 22)
  ssh_port: 22

secrets:
  # Hetzner API token - can also be set via HETZNER_API_TOKEN environment variable
  hetzner_api_token: ""
